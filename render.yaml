services:
  - type: web
    name: sigma-wasm
    env: docker
    plan: free
    region: oregon
    dockerfilePath: ./Dockerfile
    dockerContext: .
    healthCheckPath: /
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      # Add additional environment variables as needed
      # - key: API_URL
      #   value: https://api.example.com
      # - key: SECRET_KEY
      #   sync: false
    buildFilter:
      paths:
        - src/**
        # **Learning Point**: Add new WASM crate paths here so Render.com rebuilds
        # when you change those crates. This optimizes deployment by only rebuilding
        # when relevant files change.
        - wasm-astar/**
        - wasm-preprocess/**
        - wasm-preprocess-256m/**
        - wasm-preprocess-image-captioning/**
        - wasm-agent-tools/**
        - wasm-fractal-chat/**
        - wasm-hello/**
        - wasm-babylon-wfc/**
        - wasm-babylon-chunks/**
        - wasm-multilingual-chat/**
        - Cargo.toml
        - package.json
        - vite.config.ts
        - tsconfig.json
        - Dockerfile
        - nginx.conf
        - nginx.conf.template
        - nginx-main.conf
        - docker-entrypoint.sh
        - scripts/**
        - pages/**
        - index.html
      ignoredPaths:
        - README.md
        - .git/**
        - node_modules/**
        - target/**
        - dist/**
        - pkg/**

